# Face-recognize-system-using-retinaface-and-facenet
Face recognize system using retinaface and facenet

一、 门禁功能的实现

当摄像头打开后，就可以进行开门操作了。由于硬件条件所限，不能做一个真实的门锁控制系统，所以这里的“开门”以文本和播放音乐的形式呈现。当按下“开门”按钮后，如果只识别到一张人脸，且身份非“Unknown”，则可以开门，否则提示开门失败。每次开门记录都将输出至“jilu.txt”文本文件。
除此之外，此模块还有一个作为特色的人性化功能：如果学生于23点之后使用门禁，则认定为“晚归”，其余时间段则认定为“准时”。在“晚归”或“准时”的不同状态下，除输出记录的注明不同外，还将进行不同的人性化提示。如果是“晚归”，系统将播放提示音频“晚上好，下次要早点回来哦！”，并弹出一个消息框，提示“下次要早点回来哦！”。如果是“准时”，播放的音频为“叮咚”的门铃声，以此来模拟门禁开锁的情景，并弹出消息框“欢迎回来！”。

首先，检查摄像头是否已启动。如果摄像头未启动，将弹出一个消息框，提示“摄像头未开启！”。如果摄像头已启动，代码继续执行。
接着，获取当前日期和时间，并将其格式化为yyyy/MM/dd-hh:mm:ss的形式，用于后续的记录输出。
考虑到用户在使用人脸识别开启门禁时，有可能会遇到附近有人等多人同时出现在摄像头视野里的情况。为了避免多人同时进行人脸识别而对系统造成干扰的情况，代码if len(face_names2) == 1 and face_names2[0] != 'Unknown'限制了同时进行人脸识别的人数。只有当识别到的人脸数量为1，并且身份不是“Unknown”时，才认定当前用户具有开门的权限，并执获取此人的人脸名称，存储在“name”变量中。
然后，系统将检查当前时间是否晚于23点。如果是，则认定该用户晚归，并在文本文件“jilu.txt”中添加一条记录，记录人名、时间和“晚归”的状态；反之，则认定该用户准点回宿舍，添加的记录为人名、时间和“准时”的状态。


二、 数据库录入功能的实现
数据库录入功能的实现相对就很容易，因为它的本质就是用摄像头拍下含有人脸信息的照片，然后将照片保存在指定的文件夹里即可。数据库录入功能的效果，如图所示。
![image](https://github.com/motortor/Face-recognize-system-using-retinaface-and-facenet/blob/main/sample.png)  
